<div class="admin-section">
  <h2>â“ Gestion des Questions</h2>

  <!-- Formulaire dâ€™ajout / modification -->
  <form (ngSubmit)="addOrUpdateQuestion()">
    <input type="text" [(ngModel)]="newQuestion.questionText" name="questionText" placeholder="Ã‰noncÃ© de la question" required />
    <input type="text" [(ngModel)]="newQuestion.choice1" name="choice1" placeholder="Choix 1" />
    <input type="text" [(ngModel)]="newQuestion.choice2" name="choice2" placeholder="Choix 2" />
    <input type="text" [(ngModel)]="newQuestion.choice3" name="choice3" placeholder="Choix 3" />
    <input type="text" [(ngModel)]="newQuestion.choice4" name="choice4" placeholder="Choix 4" />
    <input type="text" [(ngModel)]="newQuestion.correctAnswer" name="correctAnswer" placeholder="Bonne rÃ©ponse" required />
    <input type="number" [(ngModel)]="newQuestion.points" name="points" placeholder="Points" min="1" required />

    <select [(ngModel)]="newQuestion.quizId" name="quizId" required>
      <option value="0" disabled selected>Choisir un quiz</option>
      <option *ngFor="let q of quizzes" [value]="q.id">{{ q.title }}</option>
    </select>

    <button type="button" (click)="addOrUpdateQuestion()">{{ isEdit ? 'ğŸ’¾ Enregistrer' : 'â• Ajouter' }}</button>
    <button *ngIf="isEdit" type="button" class="cancel" (click)="cancelEdit()">âŒ Annuler</button>
  </form>

  <!-- Loader -->
  <div *ngIf="loading" class="loader">Chargement des questions...</div>

  <!-- Table des questions -->
  <table *ngIf="!loading && questions.length > 0">
    <thead>
    <tr>
      <th>ID</th>
      <th>Question</th>
      <th>Bonne rÃ©ponse</th>
      <th>Points</th>
      <th>Quiz</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let q of questions">
      <td>{{ q.id }}</td>
      <td>{{ q.questionText }}</td>
      <td>{{ q.correctAnswer }}</td>
      <td>{{ q.points }}</td>
      <td>{{ getQuizTitle(q.quizId) }}</td>
      <td class="actions">
        <button class="edit" (click)="editQuestion(q)">âœ Modifier</button>
        <button class="delete" (click)="deleteQuestion(q.id!)">ğŸ—‘ Supprimer</button>
      </td>
    </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && questions.length === 0" class="no-data">
    Aucune question disponible.
  </div>
</div>
